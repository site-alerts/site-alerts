// =====================================================
// SA Admin UI - Bootstrap Functions (Extracted)
// =====================================================
// Only essential functions needed for our custom components

@use "sass:math";

// Color contrast
@function color-contrast(
  $background,
  $color-contrast-dark: #000,
  $color-contrast-light: #fff,
  $min-contrast-ratio: 4.5
) {
  $foregrounds: $color-contrast-light, $color-contrast-dark, #fff, #000;
  $max-ratio: 0;
  $max-ratio-color: null;

  @each $color in $foregrounds {
    $contrast-ratio: contrast-ratio($background, $color);
    @if $contrast-ratio > $min-contrast-ratio {
      @return $color;
    } @else if $contrast-ratio > $max-ratio {
      $max-ratio: $contrast-ratio;
      $max-ratio-color: $color;
    }
  }

  @return $max-ratio-color;
}

// Contrast ratio calculation
@function contrast-ratio($background, $foreground) {
  $l1: luminance($background);
  $l2: luminance($foreground);

  @if $l1 > $l2 {
    @return math.div($l1 + 0.05, $l2 + 0.05);
  } @else {
    @return math.div($l2 + 0.05, $l1 + 0.05);
  }
}

// Luminance calculation
@function luminance($color) {
  $rgb: (
          "r": red($color),
          "g": green($color),
          "b": blue($color)
  );

  @each $name, $value in $rgb {
    @if math.div($value, 255) < 0.03928 {
      $value: math.div(math.div($value, 255), 12.92);
    } @else {
      $value: math.pow(
                      math.div(math.div($value, 255) + 0.055, 1.055),
                      2.4
      );
    }
    $rgb: map-merge($rgb, ($name: $value));
  }

  @return (map-get($rgb, "r") * 0.2126) +
          (map-get($rgb, "g") * 0.7152) +
          (map-get($rgb, "b") * 0.0722);
}

// Tint a color: mix with white
@function tint-color($color, $weight) {
  @return mix(white, $color, $weight);
}

// Shade a color: mix with black
@function shade-color($color, $weight) {
  @return mix(black, $color, $weight);
}

// Shift a color: tint for light theme, shade for dark
@function shift-color($color, $weight) {
  @if $weight > 0 {
    @return shade-color($color, $weight);
  } @else {
    @return tint-color($color, -$weight);
  }
}

// Add function - safe addition
@function add($value1, $value2, $return-calc: true) {
  @if $value1 == null {
    @return $value2;
  }
  @if $value2 == null {
    @return $value1;
  }
  @if type-of($value1) == number and type-of($value2) == number and comparable($value1, $value2) {
    @return $value1 + $value2;
  }
  @if $return-calc == true {
    @return calc(#{$value1} + #{$value2});
  } @else {
    @return $value1 + unquote(" + ") + $value2;
  }
}

// Subtract function - safe subtraction
@function subtract($value1, $value2, $return-calc: true) {
  @if $value1 == null and $value2 == null {
    @return null;
  }
  @if $value1 == null {
    @return -$value2;
  }
  @if $value2 == null {
    @return $value1;
  }
  @if type-of($value1) == number and type-of($value2) == number and comparable($value1, $value2) {
    @return $value1 - $value2;
  }
  @if $return-calc == true {
    @return calc(#{$value1} - #{$value2});
  } @else {
    @return $value1 + unquote(" - ") + $value2;
  }
}

// Strip unit from value
@function strip-unit($value) {
  @return math.div($value, ($value * 0 + 1));
}

// Convert to rem
@function to-rem($value) {
  @if type-of($value) == "number" and unit($value) == "px" {
    @return math.div($value, 16px) * 1rem;
  }
  @return $value;
}

// Map deep get
@function map-deep-get($map, $keys...) {
  @each $key in $keys {
    $map: map-get($map, $key);
  }
  @return $map;
}